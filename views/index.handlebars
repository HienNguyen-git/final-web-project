<!DOCTYPE html>
<html lang="en">

<head>
    <title>File Managements</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <style>
        .fa,
        .fas {
            color: #858585;
        }

        .fa-folder {
            color: rgb(74, 158, 255);
        }

        i.fa,
        table i.fas {
            font-size: 16px;
            margin-right: 6px;
        }

        i.action {
            cursor: pointer;
        }

        a {
            color: black;
        }
    </style>
</head>

<body>
    <div class="container index">
        <div class="row align-items-center py-5">
            Welcome back  <a class="font-weight-bold p-2" href="/users/profile">{{username}} sdfafd</a>
        </div>



        <div class="recharge-box">
            <ol class="breadcrumb" style=" margin-bottom: 0;" >
                <li class="breadcrumb-item">Receive</li>
            </ol>
            <div class="table-container">
                <table class="table table-hover border">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Phone sender</th>
                            <th>Value</th>
                            <th>Fee</th>
                            <th>Cost bearer</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="receive-body">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="deposit-box">
            <ol class="breadcrumb" style=" margin-bottom: 0;">
                <li class="breadcrumb-item">Deposit</li>
            </ol>
            <div class="table-container">
                <table class="table table-hover border">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Send to</th>
                            <th>Value</th>
                            <th>Fee</th>
                            <th>Status</th>
                            <th>Cost bearer</th>
                            <th>Date</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="deposit-body">
                    </tbody>
                </table>
            </div>

        </div>
        <div class="withdraw-box">
            <ol class="breadcrumb" style=" margin-bottom: 0;">
                <li class="breadcrumb-item">Withdraw</li>
            </ol>
            <div class="table-container">
                <table class="table table-hover border">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Card number</th>
                            <th>Value</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="withdraw-body">
                    </tbody>
                </table>
            </div>

        </div>
        <div class="phone-card-box" >
            <ol class="breadcrumb" style=" margin-bottom: 0;">
                <li class="breadcrumb-item">Phone card</li>
            </ol>
            <div class="table-container">
                <table class="table table-hover border">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Provider</th>
                            <th>Code</th>
                            <th>Type</th>
                            <th>Quantity</th>
                            <th>Date</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="phonecard-body">
                    </tbody>
                </table>
            </div>

        </div>

        <div class="recharge-box">
            <ol class="breadcrumb" style=" margin-bottom: 0;" >
                <li class="breadcrumb-item">Recharge</li>
            </ol>
            <div class="table-container">
                <table class="table table-hover border">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Card number</th>
                            <th>Value</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="recharge-body">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal fade" id="view1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Delete product</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <strong>Are you sure want to delete product ABC</strong>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger">Delete</button>
            </div>
            </div>
        </div>
    </div>

    <script>
        const myUrl = location.href
        let withdrawContent
        let depositContent
        let phonecardContent
        let rechargeContent
        let data

        const withdrawBody = document.querySelector('#withdraw-body')
        const depositBody = document.querySelector('#deposit-body')
        const phonecardBody = document.querySelector('#phonecard-body')
        const rechargeBody = document.querySelector('#recharge-body');
        const receiveBody = document.querySelector('#receive-body');

        // Get withdraw 
        (async()=>{
            const myFetch = await fetch(myUrl+"withdraw/api")
            const res = await myFetch.json()
            if(res.code==0){
                const context = res.data.map(e=>`
                    <tr>
                        <td>${e.id}</td>
                        <td>${e.card_number}</td>
                        <td>${e.value}</td>
                        <td>${e.status}</td>
                        <td>${e.date}</td>
                        <td><i data-toggle="modal" data-target="#view1"  onclick="handleView('${e.note}')" class="fa fa-edit action"></i></td>
                    </tr>
                    `
                ).join("")

                withdrawBody.insertAdjacentHTML('beforeend', context)
            }
            console.log(res)
        })();

        // Get deposit
        (async()=>{
            const myFetch = await fetch(myUrl+"deposit/api/sender")
            const res = await myFetch.json()
            if(res.code==0){
                const context = res.data.map(e=>`
                    <tr>
                        <td>${e.id}</td>
                        <td>${e.phone_receiver}</td>
                        <td>${e.value}</td>
                        <td>${e.fee}</td>
                        <td>${e.status}</td>
                        <td>${e.feeperson}</td>
                        <td>${e.date}</td>
                        <td><i data-toggle="modal" data-target="#view1"  onclick="handleView('${e.id}')" class="fa fa-edit action"></i></td>
                    </tr>
                    `
                ).join("")

                depositBody.insertAdjacentHTML('beforeend', context)
            } 
            else console.error(res.message)
            console.log(res)
        })();


        // Get receive
        (async()=>{
            const myFetch = await fetch(myUrl+"deposit/api/receiver")
            const res = await myFetch.json()
            if(res.code==0){
                const context = res.data.map(e=>`
                    <tr>
                        <td>${e.id}</td>
                        <td>${e.phone_sender}</td>
                        <td>${e.value}</td>
                        <td>${e.fee}</td>
                        <td>${e.feeperson}</td>
                        <td>${e.status}</td>
                        <td>${e.date}</td>
                        <td><i data-toggle="modal" data-target="#view1"  onclick="handleView('${e.id}')" class="fa fa-edit action"></i></td>
                    </tr>
                    `
                ).join("")
                receiveBody.insertAdjacentHTML('beforeend', context)
            }
            else console.error(res.message)
            console.log(res)
        })();


        // Get phone card
        (async()=>{
            const myFetch = await fetch(myUrl+"phonecard/api")
            const res = await myFetch.json()
            if(res.code==0){
                const context = res.data.map(e=>`
                    <tr>
                        <td>${e.id}</td>
                        <td>${e.provider_number}</td>
                        <td>${e.code}</td>
                        <td>${e.price}</td>
                        <td>${e.quantity}</td>
                        <td>${e.date}</td>
                    </tr>
                    `
                ).join("")
                
                phonecardBody.insertAdjacentHTML('beforeend', context)
            }
            else console.error(res.message)
            console.log(res)
        })();

        // Get recharge
        (async()=>{
            const myFetch = await fetch(myUrl+"users/card/api")
            const res = await myFetch.json()
            if(res.code==0) {
                const context = res.data.map(e=>`
                    <tr>
                        <td>${e.id}</td>
                        <td>${e.card_number}</td>
                        <td>${e.money}</td>
                        <td>${e.recharge_date}</td>
                    </tr>
                    `
                ).join("")
                rechargeBody.insertAdjacentHTML('beforeend', context)
            }
            else console.error(res.message)
            console.log(res)
        })();


        
    </script>

</body>

</html>